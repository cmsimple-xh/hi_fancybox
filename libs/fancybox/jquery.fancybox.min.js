/*
 * FancyBox - jQuery Plugin
 * Simple and fancy lightbox alternative
 *
 * Examples and documentation at: http://fancybox.net
 * 
 * (2016-10-16) Modified 2016 Holger Irmler (jQuery 3.0 - 3.1.1 compatibility, better support for mobile devices)
 * 
 * (22/11/2012) Modified 2012 Nikola Vidoni (mobile ready, CSS3 optimizations, dropped IE6-7 support for shadows & opacity)
 * 
 * Copyright (c) 2008 - 2010 Janis Skarnelis
 * That said, it is hardly a one-person project. Many people have submitted bugs, code, and offered their advice freely. Their support is greatly appreciated.
 * 
 * Version: 1.3.4 (11/11/2010)
 * Requires: jQuery v1.3+
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
!function(t){var e,n,i,a,o,d,c,r,h,s,f,l,p=0,g={},u=[],y=0,m={},w=[],b=null,x=new Image,v=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,I=/[^\.]\.(swf)\s*$/i,k=0,C="",O=!1,j=t.extend(t("<div/>")[0],{prop:0}),T=function(){n.hide(),x.onerror=x.onload=null,b&&b.abort(),e.empty()},A=function(){return!1===g.onError(u,p,g)?(n.hide(),void(O=!1)):(g.titleShow=!1,g.width="auto",g.height="auto",e.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),void S())},E=function(){var i,a,o,c,r,h,s=u[p];if(T(),g=t.extend({},t.fn.fancybox.defaults,"undefined"==typeof t(s).data("fancybox")?g:t(s).data("fancybox")),h=g.onStart(u,p,g),h===!1)return void(O=!1);if("object"==typeof h&&(g=t.extend(g,h)),o=g.title||(s.nodeName?t(s).attr("title"):s.title)||"",s.nodeName&&!g.orig&&(g.orig=t(s).children("img:first").length?t(s).children("img:first"):t(s)),""===o&&g.orig&&g.titleFromAlt&&(o=g.orig.attr("alt")),i=g.href||(s.nodeName?t(s).attr("href"):s.href)||null,(/^(?:javascript)/i.test(i)||"#"==i)&&(i=null),g.type?(a=g.type,i||(i=g.content)):g.content?a="html":i&&(a=i.match(v)?"image":i.match(I)?"swf":t(s).hasClass("iframe")?"iframe":0===i.indexOf("#")?"inline":"ajax"),!a)return void A();switch("inline"==a&&(s=i.substr(i.indexOf("#")),a=t(s).length>0?"inline":"ajax"),g.type=a,g.href=i,g.title=o,g.autoDimensions&&("html"==g.type||"inline"==g.type||"ajax"==g.type?(g.width="auto",g.height="auto"):g.autoDimensions=!1),g.modal&&(g.overlayShow=!0,g.hideOnOverlayClick=!1,g.hideOnContentClick=!1,g.enableEscapeButton=!1,g.showCloseButton=!1),g.padding=parseInt(g.padding,10),g.margin=parseInt(g.margin,10),"over"!=g.titlePosition&&(g.margin+=35),e.css("padding",g.padding+g.margin),t(".fancybox-inline-tmp").off("fancybox-cancel").on("fancybox-change",function(){t(this).replaceWith(d.children())}),a){case"html":e.html(g.content),S();break;case"inline":if(t(s).parent().is("#fancybox-content")===!0)return void(O=!1);t('<div class="fancybox-inline-tmp" />').hide().insertBefore(t(s)).on("fancybox-cleanup",function(){t(this).replaceWith(d.children())}).on("fancybox-cancel",function(){t(this).replaceWith(e.children())}),t(s).appendTo(e),S();break;case"image":O=!1,t.fancybox.showActivity(),x=new Image,x.onerror=function(){A()},x.onload=function(){O=!0,x.onerror=x.onload=null,D()},x.src=i;break;case"swf":g.scrolling="no",c='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+g.width+'" height="'+g.height+'"><param name="movie" value="'+i+'"></param>',r="",t.each(g.swf,function(t,e){c+='<param name="'+t+'" value="'+e+'"></param>',r+=" "+t+'="'+e+'"'}),c+='<embed src="'+i+'" type="application/x-shockwave-flash" width="'+g.width+'" height="'+g.height+'"'+r+"></embed></object>",e.html(c),S();break;case"ajax":O=!1,t.fancybox.showActivity(),g.ajax.win=g.ajax.success,b=t.ajax(t.extend({},g.ajax,{url:i,data:g.ajax.data||{},error:function(t){t.status>0&&A()},success:function(t,a,o){var d="object"==typeof o?o:b;if(200==d.status){if("function"==typeof g.ajax.win){if(h=g.ajax.win(i,t,a,o),h===!1)return void n.hide();"string"!=typeof h&&"object"!=typeof h||(t=h)}e.html(t),S()}}}));break;case"iframe":B()}},S=function(){var n=g.width,i=g.height;n=n.toString().indexOf("%")>-1?parseInt((t(window).width()-2*g.margin)*parseFloat(n)/100,10)+"px":"auto"==n?"auto":n+"px",i=i.toString().indexOf("%")>-1?parseInt((t(window).height()-2*g.margin)*parseFloat(i)/100,10)+"px":"auto"==i?"auto":i+"px",e.wrapInner('<div style="width:'+n+";height:"+i+";overflow: "+("auto"==g.scrolling?"auto":"yes"==g.scrolling?"scroll":"hidden")+';position:relative;"></div>'),g.width=e.width(),g.height=e.height(),B()},D=function(){g.width=x.width,g.height=x.height,t("<img />").attr({id:"fancybox-img",src:x.src,alt:g.title}).appendTo(e),B()},B=function(){var o,b;return n.hide(),a.is(":visible")&&!1===m.onCleanup(w,y,m)?(t(".fancybox-inline-tmp").trigger("fancybox-cancel"),void(O=!1)):(O=!0,t(d.add(i)).off(),t(window).off("resize.fb scroll.fb"),t(document).off("keydown.fb"),a.is(":visible")&&"float"!==m.titlePosition&&a.css("height",a.height()),w=u,y=p,m=g,m.overlayShow?(i.css({"background-color":m.overlayColor,opacity:m.overlayOpacity,cursor:m.hideOnOverlayClick?"pointer":"auto",height:t(document).height(),width:t(document).width()}),i.is(":visible")||i.show()):i.hide(),l=z(),N(),a.is(":visible")?(t(c.add(h).add(s)).hide(),o=a.position(),f={top:o.top,left:o.left,width:a.width(),height:a.height()},b=f.width==l.width&&f.height==l.height,void d.fadeTo(m.changeFade,.3,function(){var n=function(){d.html(e.contents()).fadeTo(m.changeFade,1,L)};t(".fancybox-inline-tmp").trigger("fancybox-change"),d.empty().removeAttr("filter").css({"border-width":m.padding,width:l.width-2*m.padding,height:g.autoDimensions?"auto":l.height-k-2*m.padding}),b?n():(j.prop=0,t(j).animate({prop:1},{duration:m.changeSpeed,easing:m.easingChange,step:H,complete:n}))})):(a.removeAttr("style"),d.css("border-width",m.padding),"elastic"==m.transitionIn?(f=R(),d.html(e.contents()),a.show(),m.opacity&&(l.opacity=0),j.prop=0,void t(j).animate({prop:1},{duration:m.speedIn,easing:m.easingIn,step:H,complete:L})):("inside"==m.titlePosition&&k>0&&r.show(),d.css({width:l.width-2*m.padding,height:g.autoDimensions?"auto":l.height-k-2*m.padding}).html(e.contents()),void a.css(l).fadeIn("none"==m.transitionIn?0:m.speedIn,L))))},F=function(t){return t&&t.length?"float"==m.titlePosition?'<div id="fancybox-title-float-main">'+t+"</div>":'<div id="fancybox-title-'+m.titlePosition+'">'+t+"</div>":!1},N=function(){if(C=m.title||"",k=0,r.empty().removeAttr("style").removeClass(),m.titleShow===!1)return void r.hide();if(C=t.isFunction(m.titleFormat)?m.titleFormat(C,w,y,m):F(C),!C||""===C)return void r.hide();switch(r.addClass("fancybox-title-"+m.titlePosition).html(C).appendTo("body").show(),m.titlePosition){case"inside":r.css({width:l.width-2*m.padding,marginLeft:m.padding,marginRight:m.padding}),k=r.outerHeight(!0),r.appendTo(o),l.height+=k;break;case"over":r.css({marginLeft:m.padding,width:l.width-2*m.padding,bottom:m.padding}).appendTo(o);break;case"float":r.css("left",-1*parseInt((r.width()-l.width-15)/2,10)).appendTo(a);break;default:r.css({width:l.width-2*m.padding,paddingLeft:m.padding,paddingRight:m.padding}).appendTo(a)}r.hide()},P=function(){return(m.enableEscapeButton||m.enableKeyboardNav)&&t(document).on("keydown.fb",function(e){27==e.keyCode&&m.enableEscapeButton?(e.preventDefault(),t.fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!m.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),t.fancybox[37==e.keyCode?"prev":"next"]())}),m.showNavArrows?((m.cyclic&&w.length>1||0!==y)&&h.show(),void((m.cyclic&&w.length>1||y!=w.length-1)&&s.show())):(h.hide(),void s.hide())},L=function(){g.autoDimensions&&d.css("height","auto"),a.css("height","auto"),C&&C.length&&r.show(),m.showCloseButton&&c.show(),P(),m.hideOnContentClick&&d.on("click",t.fancybox.close),m.hideOnOverlayClick&&i.on("click",t.fancybox.close),t(window).on("resize.fb",t.fancybox.resize),m.centerOnScroll&&t(window).on("scroll.fb",t.fancybox.center),"iframe"==m.type&&(g&&g.showIframeLoading&&t.fancybox.showActivity(),t('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0"  allowTransparency="true" scrolling="'+g.scrolling+'" src="'+m.href+'"></iframe>').appendTo(d).on("load",function(){g&&g.showIframeLoading&&t.fancybox.hideActivity(),g&&t.isFunction(g.onIframeLoad)&&g.onIframeLoad(u,p,g)})),a.show(),O=!1,t.fancybox.center(),m.onComplete(w,y,m),W()},W=function(){var t,e;w.length-1>y&&(t=w[y+1].href,"undefined"!=typeof t&&t.match(v)&&(e=new Image,e.src=t)),y>0&&(t=w[y-1].href,"undefined"!=typeof t&&t.match(v)&&(e=new Image,e.src=t))},H=function(t){var e={width:parseInt(f.width+(l.width-f.width)*t,10),height:parseInt(f.height+(l.height-f.height)*t,10),top:parseInt(f.top+(l.top-f.top)*t,10),left:parseInt(f.left+(l.left-f.left)*t,10)};"undefined"!=typeof l.opacity&&(e.opacity=.5>t?.5:t),a.css(e),d.css({width:e.width-2*m.padding,height:e.height-k*t-2*m.padding})},M=function(){var e=navigator.userAgent,n={iphone:e.match(/(iPhone|iPod|iPad)/),android:e.match(/Android/),blackberry:e.match(/BlackBerry/)};if(n.iphone||n.android||n.blackberry){var i,a;return"undefined"!=typeof window.innerWidth?(i=window.innerWidth-m.margin,a=window.innerHeight-m.margin):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(i=document.documentElement.clientWidth-m.margin,a=document.documentElement.clientHeight-m.margin):(i=document.getElementsByTagName("body")[0].clientWidth-m.margin,a=document.getElementsByTagName("body")[0].clientHeight-m.margin),[i-m.margin,a-m.margin,t(document).scrollLeft()+m.margin,t(document).scrollTop()+m.margin]}return[t(window).width()-2*m.margin,t(window).height()-2*m.margin,t(document).scrollLeft()+m.margin,t(document).scrollTop()+m.margin]},z=function(){var t,e=M(),n={},i=m.autoScale,a=2*m.padding;return m.width.toString().indexOf("%")>-1?n.width=parseInt(e[0]*parseFloat(m.width)/100,10):n.width=m.width+a,m.height.toString().indexOf("%")>-1?n.height=parseInt(e[1]*parseFloat(m.height)/100,10):n.height=m.height+a,i&&(n.width>e[0]||n.height>e[1])&&("image"==g.type||"swf"==g.type?(t=m.width/m.height,n.width>e[0]&&(n.width=e[0],n.height=parseInt((n.width-a)/t+a,10)),n.height>e[1]&&(n.height=e[1],n.width=parseInt((n.height-a)*t+a,10))):(n.width=Math.min(n.width,e[0]),n.height=Math.min(n.height,e[1]))),n.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-n.height-40)),10),n.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-n.width-40)),10),n},K=function(t){var e=t.offset();return e.top+=parseInt(t.css("paddingTop"),10)||0,e.left+=parseInt(t.css("paddingLeft"),10)||0,e.top+=parseInt(t.css("border-top-width"),10)||0,e.left+=parseInt(t.css("border-left-width"),10)||0,e.width=t.width(),e.height=t.height(),e},R=function(){var e,n,i=g.orig?t(g.orig):!1,a={};return i&&i.length?(e=K(i),a={width:e.width+2*m.padding,height:e.height+2*m.padding,top:e.top-m.padding-20,left:e.left-m.padding-20}):(n=M(),a={width:2*m.padding,height:2*m.padding,top:parseInt(n[3]+.5*n[1],10),left:parseInt(n[2]+.5*n[0],10)}),a};t.fn.fancybox=function(e){return t(this).length?(t(this).data("fancybox",t.extend({},e,t.metadata?t(this).metadata():{})).off("click.fb").on("click.fb",function(e){if(e.preventDefault(),!O){O=!0,t(this).blur(),u=[],p=0;var n=t(this).attr("rel")||"";n&&""!=n&&"nofollow"!==n?(u=t("a[rel="+n+"], area[rel="+n+"]"),p=u.index(this)):u.push(this),E()}}),this):this},t.fancybox=function(e){var n;if(!O){if(O=!0,n="undefined"!=typeof arguments[1]?arguments[1]:{},u=[],p=parseInt(n.index,10)||0,t.isArray(e)){for(var i=0,a=e.length;a>i;i++)"object"==typeof e[i]?t(e[i]).data("fancybox",t.extend({},n,e[i])):e[i]=t({}).data("fancybox",t.extend({content:e[i]},n));u=jQuery.merge(u,e)}else"object"==typeof e?t(e).data("fancybox",t.extend({},n,e)):e=t({}).data("fancybox",t.extend({content:e},n)),u.push(e);(p>u.length||0>p)&&(p=0),E()}},t.fancybox.showActivity=function(){n.show()},t.fancybox.hideActivity=function(){n.hide()},t.fancybox.next=function(){return t.fancybox.pos(y+1)},t.fancybox.prev=function(){return t.fancybox.pos(y-1)},t.fancybox.pos=function(t){O||(t=parseInt(t),u=w,t>-1&&t<w.length?(p=t,E()):m.cyclic&&w.length>1&&(p=t>=w.length?0:w.length-1,E()))},t.fancybox.cancel=function(){O||(O=!0,t(".fancybox-inline-tmp").trigger("fancybox-cancel"),T(),g.onCancel(u,p,g),O=!1)},t.fancybox.close=function(){function e(){i.fadeOut("fast"),r.empty().hide(),a.hide(),t(".fancybox-inline-tmp, select:not(#fancybox-tmp select)").trigger("fancybox-cleanup"),d.empty(),m.onClosed(w,y,m),w=g=[],y=p=0,m=g={},O=!1}if(!O&&!a.is(":hidden")){if(O=!0,m&&!1===m.onCleanup(w,y,m))return void(O=!1);if(T(),t(c.add(h).add(s)).hide(),t(d.add(i)).off(),t(window).off("resize.fb scroll.fb"),t(document).off("keydown.fb"),d.find("iframe").attr("src",/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==m.titlePosition&&r.empty(),a.stop(),"elastic"==m.transitionOut){f=R();var n=a.position();l={top:n.top,left:n.left,width:a.width(),height:a.height()},m.opacity&&(l.opacity=1),r.empty().hide(),j.prop=1,t(j).animate({prop:0},{duration:m.speedOut,easing:m.easingOut,step:H,complete:e})}else a.fadeOut("none"==m.transitionOut?0:m.speedOut,e)}},t.fancybox.resize=function(){i.is(":visible")&&i.css("height",t(document).height()),t.fancybox.center(!0)},t.fancybox.center=function(){var t,e;O||(e=arguments[0]===!0?1:0,t=M(),!e&&(a.width()>t[0]||a.height()>t[1])||a.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-d.height()-40)-m.padding)),left:parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-d.width()-40)-m.padding))},"number"==typeof arguments[0]?arguments[0]:200))},t.fancybox.init=function(){t("#fancybox-wrap").length||(t("body").append(e=t('<div id="fancybox-tmp"></div>'),n=t('<div id="fancybox-loading"><div></div></div>'),i=t('<div id="fancybox-overlay"></div>'),a=t('<div id="fancybox-wrap"></div>')),o=t('<div id="fancybox-outer"></div>').appendTo(a),o.append(d=t('<div id="fancybox-content"></div>'),c=t('<a id="fancybox-close"></a>'),r=t('<div id="fancybox-title"></div>'),h=t('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),s=t('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),c.click(t.fancybox.close),n.click(t.fancybox.cancel),h.click(function(e){e.preventDefault(),t.fancybox.prev();var n=t("a#fancybox-left");n.detach(),setTimeout(function(){n.insertBefore(t("a#fancybox-right"))},0)}),s.click(function(e){e.preventDefault(),t.fancybox.next();var n=t("a#fancybox-right");n.detach(),setTimeout(function(){n.insertAfter(t("a#fancybox-left"))},0)}),t.fn.mousewheel&&a.on("mousewheel.fb",function(e,n){O?e.preventDefault():0!=t(e.target).get(0).clientHeight&&t(e.target).get(0).scrollHeight!==t(e.target).get(0).clientHeight||(e.preventDefault(),t.fancybox[n>0?"prev":"next"]())}))},t.fancybox.refresh=function(){O||E()},t.fn.fancybox.defaults={padding:10,margin:20,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,showIframeLoading:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onIframeLoad:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},t(document).ready(function(){t.fancybox.init()})}(jQuery);